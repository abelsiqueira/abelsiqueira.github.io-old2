__NUXT_JSONP__("/blog/2015-01-08-cutest-com-matlab", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){return {data:[{page:{slug:"2015-01-08-cutest-com-matlab",title:o,date:"2015-01-08",tags:["cutest","matlab","tech"],toc:[],body:{type:"root",children:[{type:b,tag:"h1",props:{id:"cutest-com-matlab"},children:[{type:b,tag:n,props:{href:"#cutest-com-matlab",ariaHidden:"true",tabIndex:-1},children:[{type:b,tag:"span",props:{className:["icon","icon-link"]},children:[]}]},{type:a,value:o}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"No meu "},{type:b,tag:n,props:{href:"https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=pM7FmOXHyns",rel:[p,q,r],target:s},children:[{type:a,value:"vídeo do YouTube"}]},{type:a,value:",\neu ensinei como se faz para instalar o CUTEst. Hoje estendo a instalação\npara instalar o MatLab também, mas para uma instalação mais detalhada,\ntalvez o vídeo seja mais indicado."}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Inicialmente instale o Matlab. Não vou entrar em detalhes, mas atente-se a duas\ncoisas:"}]},{type:a,value:c},{type:b,tag:t,props:{},children:[{type:a,value:c},{type:b,tag:u,props:{},children:[{type:a,value:"Algumas versões do matlab não colocam o executável num lugar \"visível pelo"}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"terminal\".\nPara resolver, usando o bash, adicione o caminho dos executáveis do MATLAB\nao PATH no arquivo `~\u002F.bashrc`.\nPor exemplo, adicionando\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"PATH=\u002Fusr\u002Flocal\u002FMATLAB\u002FR20XXc\u002Fbin:$PATH\n"}]}]}]},{type:a,value:c},{type:b,tag:t,props:{},children:[{type:a,value:c},{type:b,tag:u,props:{},children:[{type:a,value:"Você vai precisar do "},{type:b,tag:d,props:{},children:[{type:a,value:v}]},{type:a,value:" (um link para ele é suficiente) no \u002Fbin."}]},{type:a,value:c}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"Para resolver, pode fazer um link a partir do caminho original\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"$ sudo ln -s \u002Fusr\u002Flocal\u002FMATLAB\u002FR20XXc\u002Fbin\u002Fmex \u002Fbin\u002F\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Depois de instalado o Matlab,\nvamos instalar o CUTEst. Você precisará do "},{type:b,tag:d,props:{},children:[{type:a,value:"subversion"}]},{type:a,value:" instalado (que\ndisponibiliza o comando "},{type:b,tag:d,props:{},children:[{type:a,value:"svn"}]},{type:a,value:"), e do compilador de fortran.\n"},{type:b,tag:"strong",props:{},children:[{type:a,value:"A versão do compilador de fortran depende da versão do Matlab."}]}]},{type:a,value:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"},{type:b,tag:"table",props:{},children:[{type:b,tag:"thead",props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:w,props:{align:k},children:[{type:a,value:"Versão do Matlab"}]},{type:b,tag:w,props:{align:k},children:[{type:a,value:"Versão do compilador"}]}]}]},{type:b,tag:"tbody",props:{},children:[{type:b,tag:m,props:{},children:[{type:b,tag:l,props:{align:k},children:[{type:a,value:"Antes do R2011a"}]},{type:b,tag:l,props:{align:k},children:[{type:a,value:"g95"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:l,props:{align:k},children:[{type:a,value:"R2011a - R2013a"}]},{type:b,tag:l,props:{align:k},children:[{type:a,value:"gfortran-4.4"}]}]},{type:b,tag:m,props:{},children:[{type:b,tag:l,props:{align:k},children:[{type:a,value:"R2013b ou mais novo"}]},{type:b,tag:l,props:{align:k},children:[{type:a,value:"gfortran-4.7"}]}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Crie ou escolha uma pasta para as biblioteca do cutest.\nA nossa será "},{type:b,tag:d,props:{},children:[{type:a,value:"$HOME\u002Flibraries"}]},{type:a,value:".\nNessa pasta baixe os repositórios CUTEst usando o subversion.\nSiga os passos da "},{type:b,tag:n,props:{href:"http:\u002F\u002Fccpforge.cse.rl.ac.uk\u002Fgf\u002Fproject\u002Fcutest\u002Fwiki\u002F",rel:[p,q,r],target:s},children:[{type:a,value:"wiki\noficial"}]},{type:a,value:",\nou copie os comandos abaixo para um arquivo "},{type:b,tag:d,props:{},children:[{type:a,value:"baixacutest.sh"}]},{type:a,value:x}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"#!\u002Fbin\u002Fbash\n"}]}]}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"cmd=\"svn checkout -q --username anonymous --password \"\" --non-interactive --no-auth-cache\"\nurl=\"http:\u002F\u002Fccpforge.cse.rl.ac.uk\u002Fsvn\u002Fcutest\u002F\"\nfor name in archdefs sifdecode cutest sif\ndo\necho \"Downloading $name\"\n$cmd $url\u002F$name\u002Ftrunk .\u002F$name\ndone\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Para executar esse arquivo, rode os comandos"}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"$ chmod a+x baixacutest.sh\n$ .\u002Fbaixacutest.sh\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Entre na pasta "},{type:b,tag:d,props:{},children:[{type:a,value:"$HOME\u002Flibraries\u002Farchdefs"}]},{type:a,value:" e rode o comando\n"},{type:b,tag:d,props:{},children:[{type:a,value:"install_optsuite"}]},{type:a,value:".\nResponda as perguntas para instalar o CUTEst e sua família."}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Depois da instalação, o CUTEst soltará várias informações que\nvocê deve guardar no seu "},{type:b,tag:d,props:{},children:[{type:a,value:"$HOME\u002F.bashrc"}]},{type:a,value:". As minhas\ninformações estão abaixo. Você pode modificar para corresponder\nà sua configuração."}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"LIBS=$HOME\u002Flibraries\nexport ARCHDEFS=\"$LIBS\u002Farchdefs\"\nexport SIFDECODE=\"$LIBS\u002Fsifdecode\"\nexport CUTEST=\"$LIBS\u002Fcutest\"\nexport MASTSIF=\"$LIBS\u002Fsif\"\nexport PATH=\"$CUTEST\u002Fbin:$SIFDECODE\u002Fbin:$PATH\"\nexport MANPATH=\"$CUTEST\u002Fman:$SIFDECODE\u002Fman:$MANPATH\"\nexport MYARCH=\"pc64.lnx.gfo\"\nexport MYMATLABARCH=\"pc64.lnx.gfo\"\nexport MYMATLAB=\"\u002Fusr\u002Flocal\u002FMATLAB\u002FRXXXX\u002F\"\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Para fazer o Matlab funcionar com o CUTEst, você decodifica o arquivo "},{type:b,tag:d,props:{},children:[{type:a,value:"SIF"}]},{type:a,value:"\npara o format "},{type:b,tag:d,props:{},children:[{type:a,value:v}]},{type:a,value:" do matlab. Daí, você tem que abrir o Matlab naquela pasta,\nou inserir o path dessa pasta.\nAí você usa os comandos do cutest para acessar as propriedades do problema.\nO primeiro comando que você vai usar é o"}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"prob = cutest_setup()\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Para acessar a função objetivo, você pode usar"}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"f = cutest_obj(x)\n[f,g] = cutest_obj(x) % já retorna o gradiente também\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Para acessar o gradiente, você pode usar"}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"g = cutest_grad(x)\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Além disso, existem outras funções que você pode usar.\nA lista está no apêndice B do\nTechnical Report do CUTEst."}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Para testar sua instação, você pode copiar o programinha a seguir,\nque tenta encontrar o minimizador de uma função através do método\nde máxima descida."}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"function [x,fx,k] = steep(x, f, g)\n\nkmax = 1e4;\nalpha = 0.5;\neps = 1e-4;\n\nfx = f(x);\ngx = g(x);\n\nk = 1;\nwhile norm(gx) \u003E eps\n  t = 1;\n  while f(x-t*gx) \u003E fx - alpha*t*dot(gx,gx)\n    t = t*0.9;\n  end\n  x = x - t*gx;\n  fx = f(x);\n  gx = g(x);\n  k = k + 1;\n  if k \u003E kmax\n    return\n  end\nend\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"Copie esse conteúdo para um arquivo "},{type:b,tag:d,props:{},children:[{type:a,value:"steep.m"}]},{type:a,value:", e abra o Matlab.\nNo terminal, vá até a pasta em que está esse arquivo e rode:"}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"$ cutest2matlab BARD\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"No matlab, vá até a pasta que está esse arquivo e rode"}]},{type:a,value:c},{type:b,tag:f,props:{className:[g]},children:[{type:b,tag:h,props:{className:[i,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"prob = cutest_prob();\n[sol, fx, k] = steep(prob.x, @(x) cutest_obj(x), @(x) cutest_grad(x))\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{},children:[{type:a,value:"A solução do problema deve ser perto de "},{type:b,tag:d,props:{},children:[{type:a,value:"(0.08,1.14,2.33)"}]},{type:a,value:" e "},{type:b,tag:d,props:{},children:[{type:a,value:"f = 0.0082"}]},{type:a,value:x}]}]},dir:"\u002Fblog",path:"\u002Fblog\u002F2015-01-08-cutest-com-matlab",extension:".md",createdAt:y,updatedAt:y,bodyPlainText:"\n# CUTEst Com Matlab\n\nNo meu [vídeo do YouTube](https:\u002F\u002Fwww.youtube.com\u002Fwatch?v=pM7FmOXHyns),\neu ensinei como se faz para instalar o CUTEst. Hoje estendo a instalação\npara instalar o MatLab também, mas para uma instalação mais detalhada,\ntalvez o vídeo seja mais indicado.\n\nInicialmente instale o Matlab. Não vou entrar em detalhes, mas atente-se a duas\ncoisas:\n\n- Algumas versões do matlab não colocam o executável num lugar \"visível pelo\n\n```\nterminal\".\nPara resolver, usando o bash, adicione o caminho dos executáveis do MATLAB\nao PATH no arquivo `~\u002F.bashrc`.\nPor exemplo, adicionando\n```\n\n```\nPATH=\u002Fusr\u002Flocal\u002FMATLAB\u002FR20XXc\u002Fbin:$PATH\n```\n\n- Você vai precisar do `mex` (um link para ele é suficiente) no \u002Fbin.\n\n```\nPara resolver, pode fazer um link a partir do caminho original\n```\n\n```\n$ sudo ln -s \u002Fusr\u002Flocal\u002FMATLAB\u002FR20XXc\u002Fbin\u002Fmex \u002Fbin\u002F\n```\n\nDepois de instalado o Matlab,\nvamos instalar o CUTEst. Você precisará do `subversion` instalado (que\ndisponibiliza o comando `svn`), e do compilador de fortran.\n**A versão do compilador de fortran depende da versão do Matlab.**\n\n|  Versão do Matlab   | Versão do compilador |\n| :-----------------: | :------------------: |\n|   Antes do R2011a   |         g95          |\n|   R2011a - R2013a   |     gfortran-4.4     |\n| R2013b ou mais novo |     gfortran-4.7     |\n\nCrie ou escolha uma pasta para as biblioteca do cutest.\nA nossa será `$HOME\u002Flibraries`.\nNessa pasta baixe os repositórios CUTEst usando o subversion.\nSiga os passos da [wiki\noficial](http:\u002F\u002Fccpforge.cse.rl.ac.uk\u002Fgf\u002Fproject\u002Fcutest\u002Fwiki\u002F),\nou copie os comandos abaixo para um arquivo `baixacutest.sh`.\n\n```\n#!\u002Fbin\u002Fbash\n```\n\n```\ncmd=\"svn checkout -q --username anonymous --password \"\" --non-interactive --no-auth-cache\"\nurl=\"http:\u002F\u002Fccpforge.cse.rl.ac.uk\u002Fsvn\u002Fcutest\u002F\"\nfor name in archdefs sifdecode cutest sif\ndo\necho \"Downloading $name\"\n$cmd $url\u002F$name\u002Ftrunk .\u002F$name\ndone\n```\n\nPara executar esse arquivo, rode os comandos\n\n```\n$ chmod a+x baixacutest.sh\n$ .\u002Fbaixacutest.sh\n```\n\nEntre na pasta `$HOME\u002Flibraries\u002Farchdefs` e rode o comando\n`install_optsuite`.\nResponda as perguntas para instalar o CUTEst e sua família.\n\nDepois da instalação, o CUTEst soltará várias informações que\nvocê deve guardar no seu `$HOME\u002F.bashrc`. As minhas\ninformações estão abaixo. Você pode modificar para corresponder\nà sua configuração.\n\n```\nLIBS=$HOME\u002Flibraries\nexport ARCHDEFS=\"$LIBS\u002Farchdefs\"\nexport SIFDECODE=\"$LIBS\u002Fsifdecode\"\nexport CUTEST=\"$LIBS\u002Fcutest\"\nexport MASTSIF=\"$LIBS\u002Fsif\"\nexport PATH=\"$CUTEST\u002Fbin:$SIFDECODE\u002Fbin:$PATH\"\nexport MANPATH=\"$CUTEST\u002Fman:$SIFDECODE\u002Fman:$MANPATH\"\nexport MYARCH=\"pc64.lnx.gfo\"\nexport MYMATLABARCH=\"pc64.lnx.gfo\"\nexport MYMATLAB=\"\u002Fusr\u002Flocal\u002FMATLAB\u002FRXXXX\u002F\"\n```\n\nPara fazer o Matlab funcionar com o CUTEst, você decodifica o arquivo `SIF`\npara o format `mex` do matlab. Daí, você tem que abrir o Matlab naquela pasta,\nou inserir o path dessa pasta.\nAí você usa os comandos do cutest para acessar as propriedades do problema.\nO primeiro comando que você vai usar é o\n\n```\nprob = cutest_setup()\n```\n\nPara acessar a função objetivo, você pode usar\n\n```\nf = cutest_obj(x)\n[f,g] = cutest_obj(x) % já retorna o gradiente também\n```\n\nPara acessar o gradiente, você pode usar\n\n```\ng = cutest_grad(x)\n```\n\nAlém disso, existem outras funções que você pode usar.\nA lista está no apêndice B do\nTechnical Report do CUTEst.\n\nPara testar sua instação, você pode copiar o programinha a seguir,\nque tenta encontrar o minimizador de uma função através do método\nde máxima descida.\n\n```\nfunction [x,fx,k] = steep(x, f, g)\n\nkmax = 1e4;\nalpha = 0.5;\neps = 1e-4;\n\nfx = f(x);\ngx = g(x);\n\nk = 1;\nwhile norm(gx) \u003E eps\n  t = 1;\n  while f(x-t*gx) \u003E fx - alpha*t*dot(gx,gx)\n    t = t*0.9;\n  end\n  x = x - t*gx;\n  fx = f(x);\n  gx = g(x);\n  k = k + 1;\n  if k \u003E kmax\n    return\n  end\nend\n```\n\nCopie esse conteúdo para um arquivo `steep.m`, e abra o Matlab.\nNo terminal, vá até a pasta em que está esse arquivo e rode:\n\n```\n$ cutest2matlab BARD\n```\n\nNo matlab, vá até a pasta que está esse arquivo e rode\n\n```\nprob = cutest_prob();\n[sol, fx, k] = steep(prob.x, @(x) cutest_obj(x), @(x) cutest_grad(x))\n```\n\nA solução do problema deve ser perto de `(0.08,1.14,2.33)` e `f = 0.0082`.\n"},prev:{slug:"2015-01-12-instalando-o-ubuntu-1410-no-sony-vaio",title:"Instalando o Ubuntu 14.10 no Sony Vaio (Problemas com o SSD)"},next:{slug:"2015-01-06-sharelatex-e-o-basico-do-cabecalho",title:"ShareLaTeX e o básico do cabeçalho"}}],fetch:{},mutations:void 0}}("text","element","\n","code","p","div","nuxt-content-highlight","pre","language-text","line-numbers","center","td","tr","a","CUTEst Com Matlab","nofollow","noopener","noreferrer","_blank","ul","li","mex","th",".","2022-12-23T23:04:30.335Z")));